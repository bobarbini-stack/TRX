<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>CryptoX | ØµØ±Ø§ÙÛŒ Ø§Ø±Ø² Ø¯ÛŒØ¬ÛŒØªØ§Ù„</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Tahoma, sans-serif;
  background: #0f172a;
  color: #fff;
}

header {
  background: #020617;
  padding: 15px 30px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

header h1 {
  margin: 0;
  font-size: 20px;
  color: #22c55e;
}

nav a {
  color: #cbd5f5;
  margin-left: 15px;
  text-decoration: none;
  cursor: pointer;
}

.container {
  padding: 20px;
}

.price-box {
  background: #020617;
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.price {
  font-size: 28px;
  font-weight: bold;
}

select {
  background: #020617;
  color: #fff;
  padding: 10px;
  border-radius: 5px;
  border: 1px solid #334155;
}

/* Ù¾ÛŒØ§Ù… Ø¨Ø²ÙˆØ¯ÛŒ */
#soonBox {
  position: fixed;
  bottom: 30px;
  right: 30px;
  background: #020617;
  color: #fff;
  padding: 15px 25px;
  border-radius: 10px;
  display: none;
  box-shadow: 0 0 20px rgba(34,197,94,.4);
  z-index: 999;
}
</style>
</head>

<body>

<header>
  <h1>CryptoX</h1>
  <nav>
    <a onclick="soon()">Ø¨Ø§Ø²Ø§Ø±</a>
    <a onclick="soon()">Ù…Ø¹Ø§Ù…Ù„Ù‡</a>
    <a onclick="soon()">Ú©ÛŒÙ Ù¾ÙˆÙ„</a>
    <a onclick="soon()">Ù¾Ø±ÙˆÙØ§ÛŒÙ„</a>
  </nav>
</header>

<div class="container">

  <div class="price-box">
    <div>
      <div id="symbol">BTC / USDT</div>
      <div class="price" id="price">--</div>
    </div>

    <select id="coinSelect">
      <option value="btcusdt">BTC</option>
      <option value="ethusdt">ETH</option>
      <option value="bnbusdt">BNB</option>
      <option value="dogeusdt">DOGE</option>
    </select>
  </div>

  <!-- Ù†Ù…ÙˆØ¯Ø§Ø± -->
  <div id="tradingview"></div>

</div>

<!-- Ø¨Ø§Ú©Ø³ Ø¨Ø²ÙˆØ¯ÛŒ -->
<div id="soonBox">ğŸš§ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¨Ø²ÙˆØ¯ÛŒ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯</div>

<script src="https://s3.tradingview.com/tv.js"></script>

<script>
let socket;
let lastPrice = 0;

function startSocket(symbol) {
  if (socket) socket.close();

  socket = new WebSocket(
    "wss://stream.binance.com:9443/ws/" + symbol + "@trade"
  );

  socket.onmessage = function (event) {
    let data = JSON.parse(event.data);
    let price = parseFloat(data.p).toFixed(2);
    let priceEl = document.getElementById("price");

    priceEl.innerText = price;

    if (price > lastPrice) priceEl.style.color = "#22c55e";
    if (price < lastPrice) priceEl.style.color = "#ef4444";

    lastPrice = price;
  };
}

function loadChart(symbol) {
  document.getElementById("tradingview").innerHTML = "";
  new TradingView.widget({
    width: "100%",
    height: 500,
    symbol: "BINANCE:" + symbol.toUpperCase(),
    interval: "15",
    timezone: "Asia/Tehran",
    theme: "dark",
    style: "1",
    locale: "fa",
    container_id: "tradingview"
  });
}

document.getElementById("coinSelect").addEventListener("change", function () {
  let symbol = this.value;
  document.getElementById("symbol").innerText =
    symbol.toUpperCase().replace("USDT", " / USDT");

  startSocket(symbol);
  loadChart(symbol);
});

function soon() {
  let box = document.getElementById("soonBox");
  box.style.display = "block";
  setTimeout(() => box.style.display = "none", 2000);
}

// Ù¾ÛŒØ´â€ŒÙØ±Ø¶
startSocket("btcusdt");
loadChart("btcusdt");
</script>

</body>
</html>
